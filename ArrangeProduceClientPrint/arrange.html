<div class="page-header">
    <div class="container-fluid">
        <h2 class="h5 no-margin-bottom">排产</h2>
    </div>
</div>
<section class="no-padding-top">

    <!-- 打印预览 -->
    <div class="modal fade" tabindex="-1" role="dialog" id="load-modal">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content" id="modal-area">
                <div class="modal-header">
                    <h4 class="modal-title">PRINT 打印操作</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <!--startprint-->
                        <div class="col-lg-6 col-sm-6">
                            <img id="qr-code" src="/img/photos/default.png">
                        </div>
                        <div class="col-lg-6 col-sm-6">
                            <h3>机器&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span id="machine-name"></span></h3>
                            <h3>线规&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span id="gauge-value"></span></h3>
                            <h3>公差&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span id="tolerance-value"></span></h3>
                            <h3>重量&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span id="weight-value"></span></h3>
                            <h3>生产时间&nbsp;: <span id="arrange-time"></span></h3>
                            <h3>班次&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span id="shift-value"></span></h3>
                        </div>
                        <!--endprint-->
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-light" data-dismiss="modal">取消</button>
                    <button id="start-print" type="button" class="btn btn-primary">打印</button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
</section>
<section class="no-padding-top no-padding-bottom">
    <div class="container-fluid block" id="load-area">
        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12">
                <hr/>
                <div class="row">
                    <table class="table table-striped table-sm">
                        <thead class="text-center text-white">
                        <tr>
                            <th>#</th>
                            <th>设备</th>
                            <th>线规(mm)</th>
                            <th>公差(mm)</th>
                            <th>重量(kg)</th>
                            <th>安排时间</th>
                            <th>打印状态</th>
                            <th>班次</th>
                            <th>操作</th>
                        </tr>
                        </thead>
                        <tbody id="arrange-history-area" class="text-center">
                        </tbody>
                    </table>
                </div>
                <div class="text-center">
                    <div class="row">
                        <div class="col-lg-12 col-sm-12 text-center">
                            <h3 id="no-message">没有数据</h3>
                        </div>
                    </div>
                    <div class="row text-center" id="nav-message">
                        <!-- 分页信息 -->
                        <!-- 分页文字信息 -->
                        <div class="col-lg-12 col-sm-12" id="page_info_area"
                             style="text-align: center; margin-bottom: 10px;">
                        </div>
                        <!-- 分页条信息 -->
                        <div class="col-lg-12 col-sm-12" style="display: inline-block; text-align: center;">
                            <nav id="page-ul">
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>


<!-- javascript -->
<script src="js/function/arrange.js"></script>
<script type="text/javascript">
    $("#start-print").click(function () {
        preview();
    });

    function preview() {
        console.log("start print ...");
        var bdhtml = window.document.body.innerHTML; //获取当前页的html代码
        var startStr = "<!--startprint-->"; //设置打印开始区域
        var endStr = "<!--endprint-->"; //设置打印结束区域
         //从标记里获取需要打印的页面
        window.document.body.innerHTML = bdhtml.substring(bdhtml.indexOf(startStr) + startStr.length, bdhtml.indexOf(endStr)); //需要打印的页面
        window.print();
        location.reload();
        console.log("end print ...");
    }
</script>