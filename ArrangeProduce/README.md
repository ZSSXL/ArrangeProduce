## 排产助手服务器端

#### 编辑：ZSS
#### 修改时间：2019-12-05 10:08

---

- 开发环境

```
spring boot 2.2.1.RELEASE
jdk 1.8
maven 3.6.1
mysql 5.7
```

- 排产二维码编码格式设定

```

(50位) 8 + 日期 + 机器编码 + 线规 + 正公差 + 负公差 + 生产时间 + 早/晚班 + 流水号
(注：1是班，0是晚班;公差有正负)
例子：820191204*2001*0.080*+0.005*-0.005*20191205*1*0001

```

---
### 关于开发过程中出现的想法

* 关于消息推送
    
    假设情景：车间主任在办公室填写生产安排，工人/组长在车间查看排产信息，打印二维码
   
    * 需求：工人/组长在车间主任完成一个排产任务后，他的界面需要有消息弹窗提醒
   
    * 问题一：没有工人在线，消息推送给谁，如果不推送的话将消息提示消息保存在哪里？亦或者删除
    
    * 解决：目考虑保存在Redis中
   
 ```

    如果没有人员工在线，就在Redis中保存一个提示消息，直到有员工上线后，通过调用某个接口查看是否有未读消息（那么这个Redis需要保存消息数量）
        
    如果有员工在线，那就直接将消息推送给员工即可

```

* 关于在Controller中调用Notice对象
    
    * 问题：调用失败，不是我想要的对象
    
    * 解决：只能麻烦点，在前端中调用websocket的onMessage方法
   
   
       
        