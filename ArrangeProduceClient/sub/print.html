<div class="modal-header">
    <h4 class="modal-title">PRINT 打印操作</h4>
    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
    </button>
</div>
<div class="modal-body">
    <div class="row">
        <!--startprint-->
        <div class="col-lg-6 col-sm-6">
            <img id="qr-code" src="/img/photos/default.png">
        </div>
        <div class="col-lg-6 col-sm-6">
            <form class="form-horizontal">
                <div class="form-group row">
                    <label class="col-sm-3 form-control-label">小拉机:</label>
                    <div class="col-sm-9">
                        <small id="machine-name" class="form-text">小拉机1号</small>
                    </div>
                </div>
                <div class="form-group row">
                    <label class="col-sm-3 form-control-label">线规:</label>
                    <div class="col-sm-9">
                        <small id="gauge-value" class="form-text">0.080</small>
                    </div>
                </div>
                <div class="form-group row">
                    <label class="col-sm-3 form-control-label">公差:</label>
                    <div class="col-sm-9">
                        <small id="tolerance-value" class="form-text">+ 0.005</small>
                    </div>
                </div>
                <div class="form-group row">
                    <label class="col-sm-3 form-control-label">重量:</label>
                    <div class="col-sm-9">
                        <small id="weight-value" class="form-text">3827<strong>&nbsp;kg</strong></small>
                    </div>
                </div>
                <div class="form-group row">
                    <label class="col-sm-3 form-control-label">生产时间:</label>
                    <div class="col-sm-9">
                        <small id="arrange-time" class="form-text">2019-12-10</small>
                    </div>
                </div>
                <div class="form-group row">
                    <label class="col-sm-3 form-control-label">班次:</label>
                    <div class="col-sm-9">
                        <small id="shift-value" class="form-text">早班</small>
                    </div>
                </div>
            </form>
        </div>
        <!--endprint-->
    </div>
</div>
<div class="modal-footer">
    <button type="button" class="btn btn-outline-light" data-dismiss="modal">取消</button>
    <button id="start-print" type="button" class="btn btn-primary">打印</button>
</div>

<script type="text/javascript">
    $("#start-print").click(function () {
        preview();
    });

    function preview() {
        console.log("start print ...");
        const bdhtml = window.document.body.innerHTML; //获取当前页的html代码
        const startStr = "<!--startprint-->"; //设置打印开始区域
        const endStr = "<!--endprint-->"; //设置打印结束区域
        //从标记里获取需要打印的页面
        window.document.body.innerHTML = bdhtml.substring(bdhtml.indexOf(startStr) + startStr.length, bdhtml.indexOf(endStr)); //需要打印的页面
        window.print();
        window.document.body.innerHTML = bdhtml; //还原界面
        location.reload();
        console.log("end print ...");
    }
</script>