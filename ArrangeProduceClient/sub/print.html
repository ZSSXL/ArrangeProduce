<div class="modal-header">
    <h4 class="modal-title">PRINT 打印操作</h4>
    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
    </button>
</div>
<div class="modal-body">
    <div class="row">
        <!--startprint-->
        <div class="col-lg-6 col-sm-6">
            <img id="qr-code" src="/img/photos/default.png">
        </div>
        <div class="col-lg-6 col-sm-6">
            <h3>机器&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span id="machine-name"></span></h3>
            <h3>线规&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span id="gauge-value"></span></h3>
            <h3>公差&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span id="tolerance-value"></span>
            </h3>
            <h3>重量&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span id="weight-value"></span></h3>
            <h3>生产时间&nbsp;: <span id="arrange-time"></span></h3>
            <h3>班次&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span id="shift-value"></span></h3>
        </div>
        <!--endprint-->
    </div>
</div>
<div class="modal-footer">
    <button type="button" class="btn btn-outline-light" data-dismiss="modal">取消</button>
    <button id="start-print" type="button" class="btn btn-primary">打印</button>
</div>

<script type="text/javascript">
    $("#start-print").click(function () {
        preview();
    });

    function preview() {
        console.log("start print ...");
        const bdhtml = window.document.body.innerHTML; //获取当前页的html代码
        const startStr = "<!--startprint-->"; //设置打印开始区域
        const endStr = "<!--endprint-->"; //设置打印结束区域
        //从标记里获取需要打印的页面
        window.document.body.innerHTML = bdhtml.substring(bdhtml.indexOf(startStr) + startStr.length, bdhtml.indexOf(endStr)); //需要打印的页面
        window.print();
        window.document.body.innerHTML = bdhtml; //还原界面
        location.reload();
        console.log("end print ...");
    }
</script>