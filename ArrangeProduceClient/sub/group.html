<div class="modal-header">
    <h4 class="modal-title">GROUP 分组设置</h4>
    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
    </button>
</div>
<div class="modal-body">
    <div class="line"></div>
    <div class="row text-white" id="group-area">

    </div>
    <hr/>
    <div class="line"></div>
    <div class="row">
        <div class="col-lg-12 col-sm-12 text-center">
            <ul class="checkbox-tags">
                <li><input type="checkbox" id="01" name="group-tag" value="01"><label for="01"
                                                                                      class="fa fa-plus">01</label></li>
                <li><input type="checkbox" id="02" name="group-tag" value="02"><label for="02"
                                                                                      class="fa fa-plus">02</label></li>
                <li><input type="checkbox" id="03" name="group-tag" value="03"><label for="03"
                                                                                      class="fa fa-plus">03</label></li>
                <li><input type="checkbox" id="04" name="group-tag" value="04"><label for="04"
                                                                                      class="fa fa-plus">04</label></li>
                <li><input type="checkbox" id="05" name="group-tag" value="05"><label for="05"
                                                                                      class="fa fa-plus">05</label></li>
                <li><input type="checkbox" id="06" name="group-tag" value="06"><label for="06"
                                                                                      class="fa fa-plus">06</label></li>
                <li><input type="checkbox" id="07" name="group-tag" value="07"><label for="07"
                                                                                      class="fa fa-plus">07</label></li>
                <li><input type="checkbox" id="08" name="group-tag" value="08"><label for="08"
                                                                                      class="fa fa-plus">08</label></li>
                <li><input type="checkbox" id="09" name="group-tag" value="09"><label for="09"
                                                                                      class="fa fa-plus">09</label></li>
                <li><input type="checkbox" id="10" name="group-tag" value="10"><label for="10"
                                                                                      class="fa fa-plus">10</label></li>
                <br/>
                <li><input type="checkbox" id="11" name="group-tag" value="11"><label for="11"
                                                                                      class="fa fa-plus">11</label></li>
                <li><input type="checkbox" id="12" name="group-tag" value="12"><label for="12"
                                                                                      class="fa fa-plus">12</label></li>
                <li><input type="checkbox" id="13" name="group-tag" value="13"><label for="13"
                                                                                      class="fa fa-plus">13</label></li>
                <li><input type="checkbox" id="14" name="group-tag" value="14"><label for="14"
                                                                                      class="fa fa-plus">14</label></li>
                <li><input type="checkbox" id="15" name="group-tag" value="15"><label for="15"
                                                                                      class="fa fa-plus">15</label></li>
                <li><input type="checkbox" id="16" name="group-tag" value="16"><label for="16"
                                                                                      class="fa fa-plus">16</label></li>
                <li><input type="checkbox" id="17" name="group-tag" value="17"><label for="17"
                                                                                      class="fa fa-plus">17</label></li>
                <li><input type="checkbox" id="18" name="group-tag" value="18"><label for="18"
                                                                                      class="fa fa-plus">18</label></li>
                <li><input type="checkbox" id="19" name="group-tag" value="19"><label for="19"
                                                                                      class="fa fa-plus">19</label></li>
                <li><input type="checkbox" id="20" name="group-tag" value="20"><label for="20"
                                                                                      class="fa fa-plus">20</label></li>
                <br/>
                <li><input type="checkbox" id="21" name="group-tag" value="21"><label for="21"
                                                                                      class="fa fa-plus">21</label></li>
                <li><input type="checkbox" id="22" name="group-tag" value="22"><label for="22"
                                                                                      class="fa fa-plus">22</label></li>
                <li><input type="checkbox" id="23" name="group-tag" value="23"><label for="23"
                                                                                      class="fa fa-plus">23</label></li>
                <li><input type="checkbox" id="24" name="group-tag" value="23"><label for="24"
                                                                                      class="fa fa-plus">24</label></li>
                <li><input type="checkbox" id="25" name="group-tag" value="25"><label for="25"
                                                                                      class="fa fa-plus">25</label></li>
                <li><input type="checkbox" id="26" name="group-tag" value="26"><label for="26"
                                                                                      class="fa fa-plus">26</label></li>
                <li><input type="checkbox" id="27" name="group-tag" value="27"><label for="27"
                                                                                      class="fa fa-plus">27</label></li>
                <li><input type="checkbox" id="28" name="group-tag" value="28"><label for="28"
                                                                                      class="fa fa-plus">28</label></li>
                <li><input type="checkbox" id="29" name="group-tag" value="29"><label for="29"
                                                                                      class="fa fa-plus">29</label></li>
                <li><input type="checkbox" id="30" name="group-tag" value="30"><label for="30"
                                                                                      class="fa fa-plus">30</label></li>
            </ul>
        </div>
        <div class="input-group col-lg-8 col-sm-8 offset-lg-2 offset-sm-2">
            <div class="input-group-prepend"><span class="input-group-text">新分组</span></div>
            <input type="text" class="form-control" id="group-name" placeholder="请输入新组名">
            <div class="input-group-append">
                <button class="btn btn-outline-info" id="add-group">添加</button>
            </div>
        </div>
    </div>
</div>
<div class="modal-footer">
    <div class="col-lg-10 col-sm-10">
        <label>[操作步骤] 1、选择需要的编号，添加新组; 2、点击添加; 3、点击组名进行删除;</label>
    </div>
    <div class="col-lg-2 col-sm-2">
        <button type="button" class="btn btn-outline-light" data-dismiss="modal">Close</button>
    </div>
</div>

<script type="text/javascript">
    $(document).on("click", ".delete-group", function () {
        let groupId = $(this).attr("group-id");
        Notiflix.Confirm.Show("警告", "是否确认删除", "确定", "取消", function () {
            $.ajax({
                url: serverUrl + "/group/" + groupId,
                contentType: "application/json; charset=utf-8",
                type: "DELETE",
                beforeSend: function (XMLHttpRequest) {
                    XMLHttpRequest.setRequestHeader("token", token);
                },
                success: function (result) {
                    if (result.status === 0) {
                        Notiflix.Notify.Success("删除成功");
                        getAllGroup();
                        getAllGroupSetting();
                    } else {
                        Notiflix.Notify.Failure(result.msg);
                    }
                }
            });
        });
    });

    $("#add-group").click(function () {
        let groupNumberList = [];
        $("input[name='group-tag']:checked").each(function (index, item) {
            groupNumberList.push($(this).val());
        });
        if (groupNumberList.length === 0) {
            Notiflix.Notify.Warning("请选择至少一个编号");
            return false;
        }
        let groupName = $("#group-name").val();
        if (groupName === "") {
            Notiflix.Notify.Warning("请输入组名");
            return false;
        }
        let data = {"groupNumber": groupNumberList.toString(), groupName};
        $.ajax({
            url: serverUrl + "/group",
            contentType: "application/json; charset=utf-8",
            type: "POST",
            beforeSend: function (XMLHttpRequest) {
                XMLHttpRequest.setRequestHeader("token", token);
            },
            data: JSON.stringify(data),
            success: function (result) {
                if (result.status === 0) {
                    Notiflix.Notify.Success("新建成功");
                    getAllGroupSetting();
                    getAllGroup();
                } else {
                    Notiflix.Notify.Failure(result.msg);
                }
            }
        });
    });
</script>